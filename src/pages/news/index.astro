---
import BaseLayout from "../../layouts/BaseLayout.astro";
import NewsList from "../../components/NewsList.jsx";
import { client } from "../../data/db";

let builder = client
  .from("news")
  .select("id, title, image")
  .filter("draft", "eq", false);

const { data } = await builder.order("created_at", {
  ascending: false,
});

const title = "Koala 聊开源 - 陪伴你成长的技术频道";
---

<BaseLayout title={title}>
  <NewsList data={data} grid="news" client:load />
</BaseLayout>

<script
  src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"
></script>
